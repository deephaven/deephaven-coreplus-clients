/*
 * Copyright (c) 2016-2019 Deephaven Data Labs and Patent Pending
 */

syntax = "proto3";

package io.deephaven.proto.schema;

import "deephaven_enterprise/proto/common.proto";
import "google/protobuf/wrappers.proto";

option java_multiple_files = true;
option optimize_for = SPEED;

enum NamespaceSet {
  Unset = 0;
  System = 1;
  User = 2;
  DoesNotExist = 3;
}

enum Action {
  Get = 0;
  Create = 1;
  Update = 2;
  Delete = 3;
}

message NamespaceSetRequest {
  NamespaceSet namespaceSet = 1;
}

message NamespaceRequest {
  string name = 1;
  NamespaceSet namespaceSet = 2; // only valid for create
  string code = 3;
  string comment = 4;
}

message NamespaceSetReply {
  NamespaceSet set = 1;
}

message SchemaRequest {
  string namespace = 1;
  string tableName = 2;
  int64 version = 3;
  Action action = 4;
  SchemaItem schema = 5;
  string code = 6;
  string comment = 7;
}

message SchemasRequest {
  NamespaceSet namespaceSet = 1;
  string namespace = 2;
}

message SchemaReply {
  SchemaItem item = 1;
}
message SchemaItem {
  bytes schema = 1;
  google.protobuf.BytesValue copySchema = 2;
}

message TableNameReply {
  NamespaceSet namespaceSet = 1;
  string namespace = 2;
  string tableName = 3;
}

message ListAllTablesRequest {
}